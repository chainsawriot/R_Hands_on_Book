<<<<<<< HEAD
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
df.log.income <- data.frame(log.incomeh=tanh(log.income))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0.3, 0.5, by = 0.001),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
df.log.income <- data.frame(log.incomeh=tanh(log.income))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0.3, 0.5, by = 0.001),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
#geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) #+
#geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
#stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
#stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
df.log.income <- data.frame(log.incomeh=tanh(log.income))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.01),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) #+
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
df.log.income <- data.frame(log.incomeh=log.income)
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.01),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) #+
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
df.log.income <- data.frame(log.incomeh=log.income)
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) #+
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
df.log.income <- data.frame(log.incomeh=log.income)
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
atan.func <- function(x, lamb, mean){
f <- lamb * atanh(x - mean)
return(f)
}
df.log.income <- data.frame(log.incomeh=atan.func(log.income))
atan.func <- function(x, lamb, mean){
f <- lamb * atanh(x - mean)
return(f)
}
df.log.income <- data.frame(log.incomeh=atan.func(log.income, 2, log.mean))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
tan.func <- function(x, lamb, mean){
f <- lamb * tanh(-x - mean)
return(f)
}
df.log.income <- data.frame(log.incomeh=atan.func(log.income, 2, log.mean))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
if(!require("pacman")) {install.packages("pacman");library(pacman)}
p_load(tidyverse, ggplot2, haven, dplyr)
theme_set(theme_classic())
daten = haven::read_dta("Datensatz/Allbus_2021.dta")
allbus_messniveau_bsp <- subset(daten, select=c("sex", "pt12", "di01a")) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ as.numeric(.))) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ ifelse(.%in% c(-7, -9, -11, -15, -42, -50 ), NA,.))) %>%
na.omit()
df_income <- data.frame(income=allbus_messniveau_bsp$di01a)
mittel <- mean(income)
median <- median(income)
modus <- as.numeric(names(sort(table(income), decreasing = TRUE)[1]))
ggplot(df_income, aes(x = income)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10000, by = 500),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = mittel, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = median, color = "blue", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = modus, color = "green", linetype = "dashed", linewidth = 1)
ggplot(df_income, aes(x = income)) +
geom_histogram(aes(y =cumsum(..density..)),
breaks = seq(-0, 10000, by = 1),
colour = "gray",
fill = "gray") +
labs(x = "Einkommen", y = "Kumulierte Häufigkeit") +
geom_vline(xintercept = mittel, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = median, color = "blue", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = modus, color = "green", linetype = "dashed", linewidth = 1)
income_mean <- mean(allbus_messniveau_bsp$di01a)
income_sd <- sd(allbus_messniveau_bsp$di01a)
# Die Verteilungsfunktion der Normalverteilung: "p" + "norm":
pnorm(1500, mean=income_mean, sd=income_sd)
quantile(allbus_messniveau_bsp$di01a, probs = c(0.278))
q <- quantile(allbus_messniveau_bsp$di01a, probs = c(1 - 0.278))
q
pnorm(2977.378, mean=income_mean, sd=income_sd)
qnorm(0.722, mean=income_mean, sd=income_sd)
ggplot(df_income, aes(x = income)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10000, by = 500),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = mittel, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=mittel, sd=income_sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=median, sd=income_sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
#shapiro.test(allbus_messniveau_bsp$di01a)
qqnorm(allbus_messniveau_bsp$di01a) # Erstellen des Q-Q-Plots
qqline(allbus_messniveau_bsp$di01a) # Einfügen der Linie, auf der die Punkte liegen sollten
log.income = log(allbus_messniveau_bsp$di01a + 42) # 42 wird hier addiert, um negative Messwerte zu vermeiden.
qqnorm(log.income)
qqline(log.income)
log.median <- median(log.income)
log.mean <- mean(log.income)
log.sd <- sd(log.income)
pnorm(log(1500), log.mean, log.sd) # Anpassen der Anfrage an die Verteilungsfunktion
plnorm(1500, log.mean, log.sd)    # Verwenden der bereits implementierten lognormal-Funktion
qnorm(0.278, income_mean, income_sd)
tan.func <- function(x, lamb, mean){
f <- lamb * tanh(-x - mean)
return(f)
}
df.log.income <- data.frame(log.incomeh=atan.func(log.income, 1, log.mean))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
tan.func <- function(x, lamb, mean){
f <- lamb * tanh(-x - mean)
return(f)
}
df.log.income <- data.frame(log.incomeh=atan.func(log.income, 0.5, log.mean))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
tan.func <- function(x, lamb, mean){
f <- lamb * tanh(-x - mean)
return(f)
}
df.log.income <- data.frame(log.incomeh=atan.func(log.income, 5, log.mean))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
tan.func <- function(x, lamb, mean){
f <- lamb * tanh(-x - mean)
return(f)
}
df.log.income <- data.frame(log.incomeh=atan.func(log.income, 10, log.mean))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
tan.func <- function(x, lamb, mean){
f <- lamb * tanh(-x - mean)
return(f)
}
df.log.income <- data.frame(log.incomeh=atan.func(log.income, 6, log.mean))
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
if(!require("pacman")) {install.packages("pacman");library(pacman)}
p_load(tidyverse, ggplot2, haven, dplyr)
theme_set(theme_classic())
daten = haven::read_dta("Datensatz/Allbus_2021.dta")
allbus_messniveau_bsp <- subset(daten, select=c("sex", "pt12", "di01a")) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ as.numeric(.))) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ ifelse(.%in% c(-7, -9, -11, -15, -42, -50 ), NA,.))) %>%
na.omit()
df_income <- data.frame(income=allbus_messniveau_bsp$di01a)
mittel <- mean(income)
median <- median(income)
modus <- as.numeric(names(sort(table(income), decreasing = TRUE)[1]))
ggplot(df_income, aes(x = income)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10000, by = 500),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = mittel, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = median, color = "blue", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = modus, color = "green", linetype = "dashed", linewidth = 1)
ggplot(df_income, aes(x = income)) +
geom_histogram(aes(y =cumsum(..density..)),
breaks = seq(-0, 10000, by = 1),
colour = "gray",
fill = "gray") +
labs(x = "Einkommen", y = "Kumulierte Häufigkeit") +
geom_vline(xintercept = mittel, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = median, color = "blue", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = modus, color = "green", linetype = "dashed", linewidth = 1)
income_mean <- mean(allbus_messniveau_bsp$di01a)
income_sd <- sd(allbus_messniveau_bsp$di01a)
# Die Verteilungsfunktion der Normalverteilung: "p" + "norm":
pnorm(1500, mean=income_mean, sd=income_sd)
quantile(allbus_messniveau_bsp$di01a, probs = c(0.278))
q <- quantile(allbus_messniveau_bsp$di01a, probs = c(1 - 0.278))
q
pnorm(2977.378, mean=income_mean, sd=income_sd)
qnorm(0.722, mean=income_mean, sd=income_sd)
ggplot(df_income, aes(x = income)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10000, by = 500),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = mittel, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=mittel, sd=income_sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=median, sd=income_sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
#shapiro.test(allbus_messniveau_bsp$di01a)
qqnorm(allbus_messniveau_bsp$di01a) # Erstellen des Q-Q-Plots
qqline(allbus_messniveau_bsp$di01a) # Einfügen der Linie, auf der die Punkte liegen sollten
log.income = log(allbus_messniveau_bsp$di01a + 42) # 42 wird hier addiert, um negative Messwerte zu vermeiden.
qqnorm(log.income)
qqline(log.income)
log.median <- median(log.income)
log.mean <- mean(log.income)
log.sd <- sd(log.income)
pnorm(log(1500), log.mean, log.sd) # Anpassen der Anfrage an die Verteilungsfunktion
plnorm(1500, log.mean, log.sd)    # Verwenden der bereits implementierten lognormal-Funktion
qnorm(0.278, income_mean, income_sd)
df.log.income <- data.frame(log.incomeh=log.income)
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
df.log.income <- data.frame(log.incomeh=log.income)
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd/2), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
df.log.income <- data.frame(log.incomeh=log.income)
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd/2), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
q1 <- quantile(log.income, probs = c(0.278))
q1
pnorm(q1,  mean=log.median, sd=log.sd/2)
q2 <- quantile(log.income, probs = c(1 - 0.278))
q2
pnorm(q2, mean=log.median, sd=log.sd/2)
if(!require("pacman")) {install.packages("pacman");library(pacman)}
p_load(tidyverse, ggplot2, haven, dplyr)
theme_set(theme_classic())
daten = haven::read_dta("Datensatz/Allbus_2021.dta")
allbus_messniveau_bsp <- subset(daten, select=c("sex", "pt12", "di01a")) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ as.numeric(.))) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ ifelse(.%in% c(-7, -9, -11, -15, -42, -50 ), NA,.))) %>%
na.omit()
df_income <- data.frame(income=allbus_messniveau_bsp$di01a)
mittel <- mean(income)
median <- median(income)
modus <- as.numeric(names(sort(table(income), decreasing = TRUE)[1]))
ggplot(df_income, aes(x = income)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10000, by = 500),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = mittel, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = median, color = "blue", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = modus, color = "green", linetype = "dashed", linewidth = 1)
ggplot(df_income, aes(x = income)) +
geom_histogram(aes(y =cumsum(..density..)),
breaks = seq(-0, 10000, by = 1),
colour = "gray",
fill = "gray") +
labs(x = "Einkommen", y = "Kumulierte Häufigkeit") +
geom_vline(xintercept = mittel, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = median, color = "blue", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = modus, color = "green", linetype = "dashed", linewidth = 1)
income_mean <- mean(allbus_messniveau_bsp$di01a)
income_sd <- sd(allbus_messniveau_bsp$di01a)
# Die Verteilungsfunktion der Normalverteilung: "p" + "norm":
pnorm(1500, mean=income_mean, sd=income_sd)
quantile(allbus_messniveau_bsp$di01a, probs = c(0.278))
q <- quantile(allbus_messniveau_bsp$di01a, probs = c(1 - 0.278))
q
pnorm(2977.378, mean=income_mean, sd=income_sd)
qnorm(0.722, mean=income_mean, sd=income_sd)
ggplot(df_income, aes(x = income)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10000, by = 500),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = mittel, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=mittel, sd=income_sd), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=median, sd=income_sd), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
#shapiro.test(allbus_messniveau_bsp$di01a)
qqnorm(allbus_messniveau_bsp$di01a) # Erstellen des Q-Q-Plots
qqline(allbus_messniveau_bsp$di01a) # Einfügen der Linie, auf der die Punkte liegen sollten
log.income = log(allbus_messniveau_bsp$di01a + 42) # 42 wird hier addiert, um negative Messwerte zu vermeiden.
qqnorm(log.income)
qqline(log.income)
log.median <- median(log.income)
log.mean <- mean(log.income)
log.sd <- sd(log.income)
pnorm(log(1500), log.mean, log.sd) # Anpassen der Anfrage an die Verteilungsfunktion
plnorm(1500, log.mean, log.sd)    # Verwenden der bereits implementierten lognormal-Funktion
qnorm(0.278, income_mean, income_sd)
df.log.income <- data.frame(log.incomeh=log.income)
ggplot(df.log.income, aes(x = log.incomeh)) +
geom_histogram(aes(y =..density..),
breaks = seq(-0, 10, by = 0.1),
colour = "black",
fill = "gray") +
labs(x = "Einkommen", y = "Häufigkeit") +
geom_vline(xintercept = log.mean, color = "red", linetype = "dashed", linewidth = 1) +
geom_vline(xintercept = log.median, color = "blue", linetype = "dashed", linewidth = 1) +
stat_function(fun=dnorm, args=list(mean=log.mean, sd=log.sd/2), colour="red") +   # Einfügen der Normalcerteilung mit arithm. mittel
stat_function(fun=dnorm, args=list(mean=log.median, sd=log.sd/2), colour="blue") +  # Einfügen der NV mit Median
labs(x = "Einkommen", y = "Häufigkeit")
x <- 7
lambda <- 3
dpois(x, lambda)
if(!require("pacman")) {install.packages("pacman");library(pacman)}
p_load(tidyverse, ggplot2, haven, dplyr)
theme_set(theme_classic())
daten = haven::read_dta("Datensatz/Allbus_2021.dta")
allbus_messniveau_bsp <- subset(daten, select=c("sex", "pt12", "di01a")) %>%                             # <1>
mutate(across(c("sex", "pt12", "di01a"), ~ as.numeric(.))) %>%                                         # <2>
mutate(across(c("sex", "pt12", "di01a"), ~ ifelse(.%in% c(-7, -9, -11, -15, -42, -50 ), NA,.))) %>%    # <3>
na.omit()                                                                                              # <4>
abs_freq_sex <- table(allbus_messniveau_bsp$sex)
length_sex <- length(allbus_messniveau_bsp$sex)
abs_freq_sex        # Ausgabe der Tabelle
abs_freq_sex <- table(allbus_messniveau_bsp$sex)
length_sex <- length(allbus_messniveau_bsp$sex)
abs_freq_sex        # Ausgabe der Tabelle
sum(abs_freq_sex)
sum(abs_freq_sex)   # Ausgabe der Summe der absoluten Häufigkeiten
length_sex          # Ausgabe der Gesamtanzahl an Merkmalsträgern im Datensatz
rel_freq_sex <- abs_freq_sex / length_sex # Berechnung der relativen Häufigkeiten
rel_freq_sex        # Ausgabe der Tabelle mit den relativen Häufigkeiten
sum(rel_freq_sex) # Ausgabe der Summe der relativen Häufigkeiten
df.sex <- data.frame(
sex=c("male", "female", "diverse"),
frequency=abs_freq_sex
)
ggplot(df.sex, aes(x="", y=frequency.Freq, fill=sex)) +
geom_bar(stat="identity") +
coord_polar("y")
if(!require("pacman")) {install.packages("pacman");library(pacman)}
p_load(tidyverse, ggplot2, haven, dplyr)
theme_set(theme_classic())
daten = haven::read_dta("Datensatz/Allbus_2021.dta")
allbus_messniveau_bsp <- subset(daten, select=c("sex", "pt12", "di01a")) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ as.numeric(.))) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ ifelse(.%in% c(-7, -9, -11, -15, -42, -50 ), NA,.))) %>%
na.omit()
abs_freq_sex <- table(allbus_messniveau_bsp$sex)
length_sex <- length(allbus_messniveau_bsp$sex)
df.sex <- data.frame(
sex=c("male", "female", "diverse"),
frequency=abs_freq_sex
)
ggplot(df.sex, aes(x="", y=frequency.Freq, fill=sex)) +
geom_bar(stat="identity") +
coord_polar("y")
if(!require("pacman")) {install.packages("pacman");library(pacman)}
p_load(tidyverse, ggplot2, haven, dplyr)
theme_set(theme_classic())
daten = haven::read_dta("Datensatz/Allbus_2021.dta")
allbus_messniveau_bsp <- subset(daten, select=c("sex")) %>%                             # <1>
mutate(across(c("sex"), ~ as.numeric(.))) %>%                                         # <2>
mutate(across(c("sex"), ~ ifelse(.%in% c(-7, -9, -11, -15, -42, -50 ), NA,.))) %>%    # <3>
na.omit()                                                                             # <4>
abs_freq_sex <- table(allbus_messniveau_bsp$sex)
length_sex <- length(allbus_messniveau_bsp$sex)
abs_freq_sex        # Ausgabe der Tabelle
sum(abs_freq_sex)   # Ausgabe der Summe der absoluten Häufigkeiten
length_sex          # Ausgabe der Gesamtanzahl an Merkmalsträgern im Datensatz
rel_freq_sex <- abs_freq_sex / length_sex # Berechnung der relativen Häufigkeiten
rel_freq_sex        # Ausgabe der Tabelle mit den relativen Häufigkeiten
df.sex <- data.frame(
sex=c("male", "female", "diverse"),
frequency=abs_freq_sex
)
ggplot(df.sex, aes(x="", y=frequency.Freq, fill=sex)) +
geom_bar(stat="identity") +
coord_polar("y")
if(!require("pacman")) {install.packages("pacman");library(pacman)}
p_load(tidyverse, ggplot2, haven, dplyr)
theme_set(theme_classic())
daten = haven::read_dta("Datensatz/Allbus_2021.dta")
allbus_messniveau_bsp <- subset(daten, select=c("sex", "pt12", "di01a")) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ as.numeric(.))) %>%
mutate(across(c("sex", "pt12", "di01a"), ~ ifelse(.%in% c(-7, -9, -11, -15, -42, -50 ), NA,.))) %>%
na.omit()
df.sex$sex[which.max(df.sex$frequency.Freq)]
allbus_messniveau_bsp$sex$sex[which.max(allbus_messniveau_bsp$.sex$frequency.Freq)]
allbus_messniveau_bsp$sex[which.max(allbus_messniveau_bsp$sex$frequency.Freq)]
=======
mtcars %>%
mean(hp, na.rm = T)
mtcars %>%
mean(.$hp, na.rm = T)
mtcars %>%
mean(.$hp)
mean(mtcars$hp)
mtcars %>%
mean(hp)
mtcars %>%
select(hp) %>%
mean()
mtcars %>%
select(hp) %>%
mean(.)
mtcars %>%
select(hp) %>%
mean(.)
mtcars %>%
select(hp)
mtcars %>%
select(hp) %>%
mean(.)
mtcars %>%
select(hp) %>%
mean(.$hp)
mtcars %>%
pull(hp) %>%
mean()
mtcars %>%
select(hp) %>%
mean()
mtcars %>%
pull(hp) %>%
mean()
mtcars %>%
select(hp)
mtcars %>%
select(hp) %>%
str()
mtcars %>%
select(hp) %>%
mean()
mtcars %>%
pull(hp) %>%
mean()
mtcars %>%
summarize(mean(hp))
mtcars %>%
summarize()
mtcars %>%
summarize(mean)
mtcars %>%
summarize(Mittelwert = mean(hp))
data %>%
str() %>%
summarize(mean (hp))
data %>%
str() %>%
summarize(mean(hp))
data %>%
summarize(mean(hp)) %>%
str()
data %>%
summarize(mean(hp))
mtcars %>%
str() %>%
summarize(mean(hp))
mtcars %>%
str() %>%
pull(hp) %>%
mean()
mtcars %>%
pull(hp) %>%
mean() %>%
str() %>%
mean(mtcars$hp)
head(vertrauen_institutionen$age) # <1>
vertrauen_institutionen <- daten %>%
select(age, pt01, pt02, pt03, pt04, pt06, pt07, pt08, pt09, pt10, pt11, pt12, pt14, pt15, pt19, pt20)
library(pacman)
p_load(haven,tidyr,dplyr)
daten <- read_dta("Datensatz/Allbus_2021.dta")
vertrauen_institutionen <- daten %>%
select(age, pt01, pt02, pt03, pt04, pt06, pt07, pt08, pt09, pt10, pt11, pt12, pt14, pt15, pt19, pt20)
head(vertrauen_institutionen$age) # <1>
View(vertrauen_institutionen)
vertrauen_institutionen$age # <1>
options(max.print = 100)
vertrauen_institutionen$age # <1>
options(max.print = 100)
vertrauen_institutionen$age
library(tidyverse)
daten <- haven::read_dta("Datensatz/Allbus_2021.dta") # <1>
install.packages("tidyverse")
daten <- haven::read_dta("Datensatz/Allbus_2021.dta")
View(daten)
library(labell)
library(labelled)
install.packages("labelled")
library(labelled)
View(daten)
str(daten)
dyplr
library(dplyr)
x <- daten %>% select(sex, yborn, pt01, pt02, pt03)
?label_attribute
get_value_labels(x)
get_value_labels(x$sex)
var_label(x$sex)
library(dplyr)
#x <- daten %>% select(sex, yborn, pt01, pt02, pt03)
colnames(daten)
var_label(x$sex)
var_label(x)
daten_auswahl <- daten %>%
select(sex, yborn, pt01, pt02, pt03)
xx <- var_label(x)
str(xx)
#str(xx)
unlist(xx)
y <- data.frame(unlist(xx))
y
y <- as.data.frame(unlist(xx))
y
y <- tibble(unlist(xx))
y
y <- as.data.frame(unlist(xx))
y
x <- var_label() %>% as.data.frame()
x <- daten_auswahl %>% var_label() %>% as.data.frame()
x <- daten_auswahl %>% var_label() %>% as.data.frame()
View(x)
x <- daten_auswahl %>% var_label() %>% as.data.frame() %>% t()
x <- daten_auswahl %>% var_label() %>% as.data.frame() %>% tidyr::pivot_longer()
x <- daten_auswahl %>% var_label() %>% as.data.frame() %>% tidyr::pivot_longer(.)
x <- daten_auswahl %>% var_label() %>% as.data.frame()
#x <- daten_auswahl %>% var_label() %>% as.data.frame()
x <- daten_auswahl %>% var_label() %>% as.data.frame() %>% data.table::transpose()
x <- daten_auswahl %>% var_label() %>% as.data.frame() %>% t()
x <- daten_auswahl %>% var_label() %>% as.data.frame() %>% t() %>% tibble::rownames_to_column()
x <- daten_auswahl %>% var_label() %>% unlist() %>% t() %>% as.data.frame() %>% tibble::rownames_to_column()
x <- daten_auswahl %>% var_label() %>% as.data.frame() %>% t() %>% tibble::rownames_to_column()
x <- daten_auswahl %>% var_label() %>% as.data.frame() %>% t()
x <- daten_auswahl %>% var_label() %>% unlist() %>% t()
x <- daten_auswahl %>% var_label() %>% unlist()
x
names(x)
daten_auswahl <- daten %>%
select(sex, yborn, pt01:pt05)
daten_auswahl <- daten %>%
select(sex, yborn, pt01:pt04)
variablen <- daten_auswahl %>%
var_label() %>%
unlist() %>%
;
variablen <- daten_auswahl %>%
var_label() %>%
unlist()
variablen
variablen <- daten_auswahl %>%
var_label() %>%
unlist() %>%
as.data.frame() %>%
t()
variablen
variablen <- daten_auswahl %>%
var_label() %>%
unlist() %>%
as.data.frame()
variablen
variablen <- daten_auswahl %>%
var_label() %>%
unlist() %>%
as.data.frame() %>%
tibble::rownames_to_column()
View(variablen)
variablen <- daten_auswahl %>%
var_label() %>%
unlist() %>%
as.data.frame() %>%
tibble::rownames_to_column("variable_name") %>%
rename("description" = ".")
variablen <- daten %>%
var_label() %>%
unlist() %>%
as.data.frame() %>%
tibble::rownames_to_column("variable_name") %>%
rename("description" = ".")
write_excel_csv2(variable, file = "Datensatz/ALLBUS_2021_variablen.csv")
# Datenvorvergarbeitung ALLBUS 2021
# Datenvorvergarbeitung ALLBUS 2021
library(dplyr)
library(tibble)
library(haven)
library(readr)
daten <- read_dta("Datensatz/Allbus_2021.dta")
# Name und Beschreibungen von Variablen extrahieren
variablen <- daten %>%
var_label() %>%
unlist() %>%
as.data.frame() %>%
rownames_to_column("variable_name") %>%
rename("description" = ".")
library(labelled)
# Name und Beschreibungen von Variablen extrahieren
variablen <- daten %>%
var_label() %>%
unlist() %>%
as.data.frame() %>%
rownames_to_column("variable_name") %>%
rename("description" = ".")
write_excel_csv2(variable, file = "Datensatz/ALLBUS_2021_variablen.csv")
write_excel_csv2(variablen, file = "Datensatz/ALLBUS_2021_variablen.csv")
View(daten)
str(daten)
View(daten)
str(daten)
?na_if
starwars %>%
mutate(across(where(is.character), ~na_if(., "unknown")))
starwars
starwars %>%
mutate(across(where(is.character), ~na_if(., "unknown")))
starwars %>%
mutate(across(where(is.character), ~na_if(., "unknown")))
x <- starwars %>%
mutate(across(where(is.character), ~na_if(., "unknown")))
xx <- starwars
View(xx)
daten2 <- daten %>%
mutate(across(where(is.numeric()), ~na_if(., . < 0)))
daten2 <- daten %>%
mutate(across(where(is.numeric()), ~na_if(., < 0)))
daten2 <- daten %>%
mutate(across(where(is.numeric()), ~na_if(., .<0))
)
daten2 <- daten %>%
mutate(across(where(is.numeric()), ~na_if(., .<0)))
daten2 <- daten %>%
mutate(across(where(is.numeric(.)), ~na_if(., .<0)))
daten2 <- daten %>%
mutate(across(where(is.numeric), ~na_if(., .<0)))
daten_auswahl <- daten %>%
select(sex, yborn, pt01:pt04)
View(daten_auswahl)
daten_auswahl <- daten %>%
select(sex, yborn, pt01:pt04) %>%
mutate(across(where(is.numeric), ~ ifelse(.x < 0, NA, .x)))
daten2 <- daten %>%
#mutate(across(where(is.numeric), ~na_if(., .<0)))
mutate(across(where(is.numeric), ~ ifelse(.x < 0, NA, .x)))
View(daten2)
View(variablen)
sample_klein <- daten %>%
select(age, sex, lm01) %>%
slice_sample(n = 20)
View(sample_klein)
get_value_labels(sample_klein$age)
get_value_labels(sample_klein$sex)
get_value_labels(sample_klein$lm01)
?get_value_labels
x <- sample_klein$lm01
x
x <- sample_klein$lm01
abc <- lookfor(daten)
View(abc)
abc2 <- lookfor_to_long_format(daten)
View(abc2)
View(abc2)
abc2 <- lookfor_to_long_format(abc)
str(abc2)
abc3 <- convert_list_columns_to_character(abc2)
View(abc3)
View(abc2)
View(abc3)
variablen <- look_for(daten)
View(variablen)
#abc <- lookfor(daten)
?to_labelled
?haven::labelled
View(abc3)
sample_klein <- daten %>%
select(age, sex, lm01) %>%
slice_sample(n = 20)
sample_klein %>%
look_for() %>%
lookfor_to_long_format() %>%
convert_list_columns_to_character()
xyz <- sample_klein %>%
look_for() %>%
lookfor_to_long_format() %>%
convert_list_columns_to_character()
View(xyz)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(age, sex, lm01), as.factor()) %>%
slice_sample(n = 20)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(age, sex, lm01)), as_factor()) %>%
slice_sample(n = 20)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(age, sex, lm01)), as_factor) %>%
slice_sample(n = 20)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(age, sex, lm01), as_factor)) %>%
slice_sample(n = 20)
View(sample_klein)
str(sample_klein)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(age, sex, lm01), as_factor)) %>%
remove_labels() %>%
#remove_attributes("format.stata") %>%
slice_sample(n = 20)
str(sample_klein)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(age, sex, lm01), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
str(sample_klein)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(where(is.character), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(age, sex, lm01), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
str(sample_klein)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(sex, lm01), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
str(sample_klein)
levels(sample_klein$sex)
levels(sample_klein$lm01)
# simpler
variablen <- look_for(daten)
# inkl. antwortoptionen
variablen_optionen <- lookfor_to_long_format(variablen)
View(variablen_optionen)
# simpler
variablen <- daten %>%
look_for() %>%
select(pos, variable, label, value_labels)
# simpler
variablen <- daten %>%
look_for() %>%
select(pos, variable, label, value_labels)
# inkl. antwortoptionen
variablen_optionen <- daten %>%
look_for() %>%
lookfor_to_long_format() %>%
select(pos, variable, label, value_labels)
View(variablen_optionen)
str(variablen_optionen)
# Liste speichern
write_excel_csv2(variablen, file = "Datensatz/ALLBUS_2021_variablen.csv")
write_excel_csv2(variablen, file = "Datensatz/ALLBUS_2021_variablen_optionen.csv")
# Datenvorvergarbeitung ALLBUS 2021
# Libraries
library(dplyr)
library(tibble)
library(haven)
library(readr)
library(labelled)
# Daten einlesen und NAs korrigieren
daten <- read_dta("Datensatz/Allbus_2021.dta") %>%
mutate(across(where(is.numeric), ~ ifelse(.x < 0, NA, .x)))
# Name und Beschreibungen von Variablen extrahieren
#variablen <- daten %>%
#  var_label() %>%
#  unlist() %>%
#  as.data.frame() %>%
#  rownames_to_column("variable_name") %>%
#  rename("description" = ".")
# simpler
variablen <- daten %>%
look_for() %>%
select(pos, variable, label, value_labels)
# inkl. antwortoptionen
variablen_optionen <- daten %>%
look_for() %>%
lookfor_to_long_format() %>%
select(pos, variable, label, value_labels)
# Liste speichern
write_excel_csv2(variablen, file = "Datensatz/ALLBUS_2021_variablen.csv")
write_excel_csv2(variablen, file = "Datensatz/ALLBUS_2021_variablen_optionen.csv")
write_excel_csv2(variablen_optionen, file = "Datensatz/ALLBUS_2021_variablen_optionen.csv")
# Subsamples erstellen
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(sex, lm01), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
View(sample_klein)
View(daten)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(sex, lm01), as_factor))
View(sample_klein)
View(daten)
str(daten)
View(variablen_optionen)
View(variablen)
# Daten einlesen und NAs korrigieren
daten <- read_dta("Datensatz/Allbus_2021.dta")
# simpler
variablen <- daten %>%
look_for() %>%
select(pos, variable, label, value_labels)
# inkl. antwortoptionen
variablen_optionen <- daten %>%
look_for() %>%
lookfor_to_long_format() %>%
select(pos, variable, label, value_labels)
# Liste speichern
write_excel_csv2(variablen, file = "Datensatz/ALLBUS_2021_variablen.csv")
write_excel_csv2(variablen_optionen, file = "Datensatz/ALLBUS_2021_variablen_optionen.csv")
View(variablen)
View(variablen_optionen)
# Subsamples erstellen
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
mutate(across(c(sex, lm01), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
View(sample_klein)
sample_klein <- daten %>%
select(age, sex, lm01) %>%
rename(alter = age,
geschlecht = sex,
fernsehkonsum = lm01) %>%
mutate(across(c(sex, lm01), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
rename(alter = age,
geschlecht = sex,
fernsehkonsum = lm01) %>%
mutate(across(c(geschlecht, fernsehkonsum), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
library(naniar)
install.packages("naniar")
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
rename(alter = age,
geschlecht = sex,
fernsehkonsum = lm01) %>%
replace_with_na_all(condition = ~.x < 0) %>%
mutate(across(c(geschlecht, fernsehkonsum), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
library(naniar)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
rename(alter = age,
geschlecht = sex,
fernsehkonsum = lm01) %>%
replace_with_na_all(condition = ~.x < 0) %>%
mutate(across(c(geschlecht, fernsehkonsum), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata") %>%
slice_sample(n = 20)
View(sample_klein)
# Wenige Fälle, wenige Variablen
sample_klein <- daten %>%
select(age, sex, lm01) %>%
slice_sample(n = 20) %>%
rename(alter = age,
geschlecht = sex,
fernsehkonsum = lm01) %>%
replace_with_na_all(condition = ~.x < 0) %>%
mutate(across(c(geschlecht, fernsehkonsum), as_factor)) %>%
remove_labels() %>%
remove_attributes("format.stata")
View(sample_klein)
View(sample_klein)
>>>>>>> b92a17b7de9a522f8cddfc34afb25d7f652b998d
